{
  "performance_testing": {
    "description": "Comprehensive performance testing configuration for the document learning application",
    "version": "1.0.0",
    "last_updated": "2025-01-13",
    
    "backend_tests": {
      "document_processing": {
        "enabled": true,
        "thresholds": {
          "small_document": {
            "max_processing_time_seconds": 15,
            "max_memory_mb": 200,
            "max_pages": 10
          },
          "medium_document": {
            "max_processing_time_seconds": 45,
            "max_memory_mb": 400,
            "max_pages": 30
          },
          "large_document": {
            "max_processing_time_seconds": 120,
            "max_memory_mb": 800,
            "max_pages": 100
          }
        },
        "test_documents": [
          {
            "filename": "1_视频教程的 课件幻灯片.pdf",
            "category": "small",
            "expected_pages": 5,
            "expected_text_blocks": 20,
            "expected_images": 3
          },
          {
            "filename": "2_TPA-Reversals.pdf",
            "category": "medium",
            "expected_pages": 15,
            "expected_text_blocks": 60,
            "expected_images": 8
          }
        ]
      },
      
      "search_performance": {
        "enabled": true,
        "thresholds": {
          "text_search_response_time_ms": 500,
          "semantic_search_response_time_ms": 1000,
          "concurrent_search_p95_ms": 2000,
          "max_memory_mb": 150
        },
        "test_queries": [
          {
            "query": "machine learning",
            "type": "text",
            "expected_min_results": 1
          },
          {
            "query": "neural networks algorithms",
            "type": "text",
            "expected_min_results": 1
          },
          {
            "query": "concepts related to artificial intelligence",
            "type": "semantic",
            "expected_min_results": 1
          }
        ]
      },
      
      "memory_monitoring": {
        "enabled": true,
        "thresholds": {
          "max_memory_growth_mb": 100,
          "memory_leak_threshold_mb": 50,
          "peak_memory_limit_mb": 1000,
          "concurrent_memory_multiplier": 1.5
        },
        "monitoring": {
          "sample_interval_seconds": 0.1,
          "test_duration_seconds": 60,
          "gc_force_enabled": true
        }
      },
      
      "concurrent_users": {
        "enabled": true,
        "scenarios": [
          {
            "name": "light_load",
            "concurrent_users": 5,
            "session_duration_seconds": 30,
            "actions": {
              "search_probability": 0.6,
              "upload_probability": 0.1,
              "review_probability": 0.3
            }
          },
          {
            "name": "moderate_load",
            "concurrent_users": 10,
            "session_duration_seconds": 45,
            "actions": {
              "search_probability": 0.5,
              "upload_probability": 0.2,
              "review_probability": 0.3
            }
          },
          {
            "name": "stress_test",
            "concurrent_users": 20,
            "session_duration_seconds": 20,
            "actions": {
              "search_probability": 0.8,
              "upload_probability": 0.1,
              "review_probability": 0.1
            }
          }
        ],
        "thresholds": {
          "max_response_time_p95_ms": 2000,
          "max_response_time_p99_ms": 5000,
          "max_error_rate": 0.05,
          "min_requests_per_second": 1.0
        }
      }
    },
    
    "frontend_tests": {
      "loading_performance": {
        "enabled": true,
        "thresholds": {
          "max_app_load_time_ms": 2000,
          "max_page_load_time_ms": 1500,
          "max_component_render_time_ms": 500,
          "max_large_dataset_render_time_ms": 2500
        },
        "test_pages": [
          "home",
          "documents",
          "search",
          "study",
          "export"
        ]
      },
      
      "interaction_performance": {
        "enabled": true,
        "thresholds": {
          "max_search_input_response_ms": 200,
          "max_card_flip_response_ms": 150,
          "max_navigation_response_ms": 100,
          "max_form_submission_response_ms": 300
        },
        "test_interactions": [
          {
            "name": "search_typing",
            "description": "Typing in search input field",
            "repetitions": 10
          },
          {
            "name": "card_flipping",
            "description": "Flipping flashcards",
            "repetitions": 5
          },
          {
            "name": "navigation_clicks",
            "description": "Clicking navigation links",
            "repetitions": 8
          }
        ]
      },
      
      "memory_performance": {
        "enabled": true,
        "thresholds": {
          "max_component_memory_mb": 100,
          "max_large_dataset_memory_mb": 300,
          "max_memory_growth_mb": 50
        },
        "test_scenarios": [
          {
            "name": "component_lifecycle",
            "description": "Mount and unmount components repeatedly",
            "cycles": 10
          },
          {
            "name": "large_dataset_rendering",
            "description": "Render components with large datasets",
            "dataset_size": 1000
          }
        ]
      },
      
      "responsive_performance": {
        "enabled": true,
        "viewport_sizes": [
          {
            "name": "mobile",
            "width": 375,
            "height": 667
          },
          {
            "name": "tablet",
            "width": 768,
            "height": 1024
          },
          {
            "name": "desktop",
            "width": 1920,
            "height": 1080
          }
        ],
        "thresholds": {
          "max_layout_shift_ms": 100,
          "max_resize_response_ms": 200
        }
      }
    },
    
    "integration_tests": {
      "api_performance": {
        "enabled": true,
        "endpoints": [
          {
            "path": "/api/documents",
            "method": "GET",
            "max_response_time_ms": 500
          },
          {
            "path": "/api/search",
            "method": "POST",
            "max_response_time_ms": 1000
          },
          {
            "path": "/api/cards",
            "method": "GET",
            "max_response_time_ms": 300
          }
        ]
      },
      
      "end_to_end_performance": {
        "enabled": true,
        "workflows": [
          {
            "name": "document_upload_to_cards",
            "description": "Complete workflow from document upload to card generation",
            "max_duration_seconds": 180,
            "steps": [
              "upload_document",
              "wait_for_processing",
              "verify_chapters",
              "verify_knowledge_points",
              "verify_cards_generated"
            ]
          },
          {
            "name": "search_and_study",
            "description": "Search for content and start study session",
            "max_duration_seconds": 30,
            "steps": [
              "perform_search",
              "select_results",
              "start_study_session",
              "review_cards"
            ]
          }
        ]
      }
    },
    
    "reporting": {
      "output_formats": ["json", "html", "csv"],
      "include_system_info": true,
      "include_detailed_metrics": true,
      "save_performance_history": true,
      "alert_thresholds": {
        "performance_degradation_percent": 20,
        "memory_increase_percent": 30,
        "error_rate_increase_percent": 10
      }
    },
    
    "environment": {
      "test_data_path": "backend/uploads",
      "output_directory": "performance_reports",
      "cleanup_after_tests": true,
      "parallel_execution": true,
      "max_parallel_tests": 4
    }
  }
}